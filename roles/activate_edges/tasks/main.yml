# Copyright 2024 Cisco Systems, Inc. and its affiliates
# GNU General Public License v3.0+ (see LICENSE or https://www.gnu.org/licenses/gpl-3.0.txt)

---

- name: Verify required variables for selected role
  ansible.builtin.include_tasks: variables_assertion.yml

- name: Activate edges in single tenant environment
  ansible.builtin.include_tasks: activate_edges.yml

- name: Activate edges in multitenant tenant environment
  ansible.builtin.include_tasks:
    file: activate_edges.yml
    apply:
      vars:
        provider_mode: true
        tenant_subdomain: "{{ tenant_item.subdomain }}"
  loop: "{{ tenants }}"
  loop_control:
    loop_var: tenant_item
    label: "{{ tenant_item.name }}"
    index_var: "tenant_id"
